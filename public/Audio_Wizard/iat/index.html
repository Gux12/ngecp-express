<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <title>NGECP</title>
    <meta name="keywords" content="free mobile website templates, free mobile website template, free iphone template, free android template, free high end touch mobile templates, free high end touch mobile template" />
    <meta name="description" content="Get free mobile website templates for Iphone , Android and High end touch mobile devices" />
    <link rel="stylesheet" href="/css/buttons.min.css">
    <link rel="stylesheet" href="/toastr/toastr.min.css">
    <link rel="stylesheet" type="text/css" href="/bootstrap/dist/css/bootstrap.css">
    <style>
    body {
        margin: 0px;
    }
    
    #start-btn {
        background: transparent;
        border: 0px;
        padding: 0px;
        width: 200px;
        height: 200px;
    }
    
    #start-btn:hover {
        cursor: pointer;
    }
    </style>
</head>

<body>
    <!--    <button onclick='xiaoi("冯帅右侧")'>冯帅右侧</button>
    <button onclick='xiaoi("冯帅")'>冯帅</button>
    <button onclick='xiaoi("汽车的选购")'>汽车的选购</button>
    <button onclick='xiaoi("送一辆汽车到我家")'>送一辆汽车到我家</button> -->
    <div class='col-md-2' style="position: fixed;margin-top: 20px">
        <input class="form-control input-lg" placeholder="输入您的需求" type="text" name="" id="iat_textInput">
    </div>
    <div id='iat_panel' style="position: fixed;top: 50%;left: 50%;width: 200px;height: 200px;margin-left: -100px;margin-top: -100px;display: none">
        <button id='start-btn' class="button">
            <div id="canvas_wrapper" style="display:none;position: absolute;">
                <canvas id="volume"></canvas>
            </div>
            <img id='mic' src="./images/mic.png" alt="" style="position: relative;width: 100%;height: 100%">
        </button>
    </div>
    <iframe src="https://5ke68a.axshare.com/%E5%86%85%E8%A7%86%E5%9B%BE.html" height='1080' width='1920' id='ifr' frameborder="0" style='display: none'></iframe>
    <script type="text/javascript" src='./js/jquery-3.1.1.min.js'></script>
    <script type="text/javascript" src='/toastr/toastr.min.js'></script>
    <script>
    onerror = function(a, b, c) {
        alert(a + b + c);
    }
    </script>
    <!-- <script>
        function iframeOnload(hasLoaded,callback){
            var iframes = document.getElementsByTagName("iframe");
            var count = hasLoaded;
            if(count < iframes.length){
                for(var i = 0; i < iframes.length ; i ++)
                {
                    iframes[i].onload = function(){
                        count++;
                        if(count == iframes.length){
                            iframeOnload(count,callback);
                        }
                    }
                }
            }
            else{
                callback();
            }
        }

        var iframe = document.createElement("iframe");
        iframe.width = 1920;
        iframe.height = 1080;
        iframe.src = "http://5ke68a.axshare.com/#g=1&p=入口&c=1";
        document.body.appendChild(iframe);

        iframeOnload(0,pageOperation);

        function pageOperation(){
            var btn1 = document.getElementById("u8881_img");
            btn1.click();
        }
        </script> -->
    <script>
    var general_option = {
        "closeButton": false,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "preventDuplicates": true,
        "showDuration": "300",
        "hideDuration": "1000",
        "timeOut": "5000",
        "extendedTimeOut": "1000",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut"
    }
    var remain_option = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "preventDuplicates": true,
        "showDuration": "300",
        "hideDuration": "1000",
        "timeOut": "0",
        "extendedTimeOut": "0",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut"
    }
    toastr.options = general_option;
    $('#iat_textInput').keypress(function(event) {
        /* Act on the event */
        if (event.keyCode == 13) {
            xiaoi(this.value);
        };
    });

    function RQ_click(element) {
        var q = element.innerHTML;
        xiaoi(q);
    }

    function xiaoi(iat_result_buf) {
        $.post('/xiaoi', {
            'userId': '1234',
            'sessionId': '123',
            'question': iat_result_buf,
            'platform': 'web'
        }, function(data, textStatus, xhr) {
            /*optional stuff to do after success */
            console.log("success");
            $('#iat_panel').fadeOut('750', function() {});
            if (data.Response.hasOwnProperty("Commands")) {
                console.log(data.Response.Commands[0].Command[0].$.name);
                console.log(data.Response.Commands[0].Command[0].Arg[0]);
                if (data.Response.Commands[0].Command[0].$.name == 'p4') {
                    document.getElementById('ifr').src = data.Response.Commands[0].Command[0].Arg[0];
                    // window.location.href = data.Response.Commands[0].Command[0].Arg[0];
                    return;
                }
            }


            if (data.Response.Type[0] == '11') {
                toastr.options = remain_option;
                relatedQuestionHtml = '';
                for (var i = data.Response.RelatedQuestions[0].Question.length - 1; i >= 0; i--) {
                    var q = data.Response.RelatedQuestions[0].Question[i];
                    relatedQuestionHtml = '<a onclick="RQ_click(this)" class="button button-border button-plain" style="margin-top: 5px;width: 100%;height:auto;">' + q + '</a>' + relatedQuestionHtml;
                }
                relatedQuestionHtml = '试试下面的问题' + relatedQuestionHtml;
                toastr.info(relatedQuestionHtml, data.Response.Content[0]);
                play_tts(data.Response.Content[0] + '. 试试下面的问题' + relatedQuestionHtml, 'aisxping');
            } else {
                toastr.options = remain_option;
                toastr.info(data.Response.Content[0]);
                play_tts(data.Response.Content[0], 'aisxping');
            }
        });
    }
    </script>
    <script type="text/javascript" src="./js/fingerprint.js"></script>
    <script type="text/javascript" src="./js/tts.min.js"></script>
    <script type="text/javascript" src="./js/tts_demo.js"></script>
    <script type="text/javascript" src='./js/fingerprint2.min.js'></script>
    <script type="text/javascript" src="./js/iat.all.js"></script>
    <script type="text/javascript" src="./js/demo.js"></script>
</body>

</html>
