<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>new index</title>
</head>
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/font-awesome.css">
<link rel="stylesheet" href="/css/buttons.min.css">
<link rel="stylesheet/less" type="text/css" href="/css/supplycell.less" />
<link rel="stylesheet" href="/css/jquery.sidr.dark.min.css">
<script src="/js/vendor/jquery-1.11.2.min.js"></script>
<script src="/js/vendor/bootstrap.min.js"></script>
<script src="/js/vendor/hammer.min.js"></script>
<script src="/js/vendor/interact.js"></script>
<script src="/js/vendor/jquery.row-grid.js"></script>
<script src="/js/vendor/echarts.js"></script>
<script src="/js/vendor/jquery.sidr.min.js"></script>
<script src="/js/less.min.js"></script>
<style>
body {
    background-color: #e0e0e0;
    /*background-color: #333;*/
    width: 100vw;
    height: 100vh;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.draggable {
    position: absolute;
    display: inline-block;
    margin: 0px;
    padding: 0px;
    border: 0px;
    width: 200px;
    height: 200px;
    -webkit-clip-path: circle(50% at 50% 50%);
    transition: -webkit-transform 0.1s;
    transition:    -moz-transform 0.1s;
    transition:     -ms-transform 0.1s;
    transition:      -o-transform 0.1s;
    transition:         transform 0.1s;
}

#dropzone {
    position: absolute;
    width: 100%;
    height: 250px;
    bottom: 0px;
    background-color: #505050;
    box-shadow: solid 1px #ffffff;
}
</style>

<body>
    <div id='dropzone'>
    </div>
    <div>
        <div class='draggable' id='draggable1' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-blue">
                <img src="img/cloth/cloth_yellow_skirt.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy1' data-target='draggable1' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like1' data-target='draggable1' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike1' data-target='draggable1' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close1' data-target='draggable1' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable2' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-red">
                <img src="img/cloth/cloth_green_jacket.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">裁剪军用夹克</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy2' data-target='draggable2' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like2' data-target='draggable2' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike2' data-target='draggable2' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close2' data-target='draggable2' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable3' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-yellow">
                <img src="img/cloth/cloth_blue_coat.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy3' data-target='draggable3' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like3' data-target='draggable3' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike3' data-target='draggable3' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close3' data-target='draggable3' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable4' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-blue">
                <img src="img/cloth/cloth2.jpg" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy4' data-target='draggable4' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like4' data-target='draggable4' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike4' data-target='draggable4' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close4' data-target='draggable4' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable5' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-blue">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy5' data-target='draggable5' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like5' data-target='draggable5' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike5' data-target='draggable5' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close5' data-target='draggable5' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable6' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-orange">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy6' data-target='draggable6' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like6' data-target='draggable6' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike6' data-target='draggable6' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close6' data-target='draggable6' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable7' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-red">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy7' data-target='draggable7' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like7' data-target='draggable7' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike7' data-target='draggable7' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close7' data-target='draggable7' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable8' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-orange">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy8' data-target='draggable8' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like8' data-target='draggable8' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike8' data-target='draggable8' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close8' data-target='draggable8' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable9' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-yellow">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy9' data-target='draggable9' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like9' data-target='draggable9' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike9' data-target='draggable9' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close9' data-target='draggable9' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable10' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-orange">
                <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy10' data-target='draggable10' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like10' data-target='draggable10' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike10' data-target='draggable10' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close10' data-target='draggable10' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable11' data-href='/' data-prop='false' data-href='/'>
            <div class="supply-cell supply-cell-blue">
                <img src="img/cloth/cloth_yellow_skirt.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy11' data-target='draggable11' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like11' data-target='draggable11' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike11' data-target='draggable11' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close11' data-target='draggable11' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable12' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-red">
                <img src="img/cloth/cloth_green_jacket.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">裁剪军用夹克</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy12' data-target='draggable12' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like12' data-target='draggable12' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike12' data-target='draggable12' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close12' data-target='draggable12' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
<!--     <div>
        <div class='draggable' id='draggable13' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-yellow">
                <img src="img/cloth/cloth_blue_coat.png" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy13' data-target='draggable13' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like13' data-target='draggable13' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike13' data-target='draggable13' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close13' data-target='draggable13' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div>
    <div>
        <div class='draggable' id='draggable14' data-href='/' data-prop='false'>
            <div class="supply-cell supply-cell-blue">
                <img src="img/cloth/cloth2.jpg" class="img-adjusted">
                <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
            </div>
        </div>
        <button class="button button-inverse button-circle button-jumbo button-small button-shopping-cart" id='buy14' data-target='draggable14' data-type='supplycellproperty'><i class="fa fa-shopping-cart"></i></button>
        <button class="button button-action button-circle button-jumbo button-small" id='like14' data-target='draggable14' data-type='supplycellproperty'><i class="fa fa-thumbs-down"></i></button>
        <button class="button button-caution button-circle button-jumbo button-small" id='dislike14' data-target='draggable14' data-type='supplycellproperty'><i class="fa fa-thumbs-up"></i></button>
        <button class="button button-circle button-jumbo button-small" id='close14' data-target='draggable14' data-type='supplycellproperty'><i class="fa fa-power-off"></i></button>
    </div> -->
    <a id="simple-menu" class="demo button" href="#sidr"><i id="menu-icon" class="fi-list"></i><font><font>MENU</font></font></a>
    <div id="sidr">
        <!-- Your content -->
        <h1 class="sidr-class-entry-title">Sidr</h1>
        <ul>
            <li><a href="#">List 1</a></li>
            <li><a href="#">List 2</a></li>
            <li><a href="#">List 3</a></li>
        </ul>
        <h1 class="sidr-class-entry-title">Sidr</h1>
    </div>
</body>
<script>
/* The dragging code for '.draggable' from the demo above
 * applies to this demo as well so it doesn't have to be repeated. */
// target elements with the "draggable" class
interact('.draggable').draggable({
    // enable inertial throwing
    inertia: false,
    // keep the element within the area of it's parent
    restrict: {
        restriction: "body",
        endOnly: true,
        elementRect: {
            top: 0,
            left: 0,
            bottom: 1,
            right: 1
        }
    },
    // enable autoScroll
    // autoScroll: true,

    // call this function on every dragmove event
    onmove: dragMoveListener,
    // call this function on every dragend event
    onend: function(event) {}
});

interact('.draggable').on('tap', function(event) {
    event.preventDefault();
    window.location.href = $('.draggable').data('href');
});

interact('.draggable').on('hold', function(event) {
    event.preventDefault();
    $(event.currentTarget).trigger('mouseover');
});

var DOMInZone = [];
Array.prototype.indexOf = function(val) {
    for (var i = 0; i < this.length; i++) {
        if (this[i] == val) return i;
    }
    return -1;
};
Array.prototype.remove = function(val) {
    var index = this.indexOf(val);
    if (index > -1) {
        this.splice(index, 1);
    }
};
$('.button-shopping-cart').click(function() {
    draggable = $(this).parent().find('.draggable')[0];
    if (!draggable.getAttribute('data-dropped') || draggable.getAttribute('data-dropped') == 'false') {
        var numcol = Math.floor($('body').width() / $(draggable).width()) - 1;
        x = ($('body').width() / numcol - $(draggable).width()) / 2 + DOMInZone.length * $('body').width() / numcol;
        dragMoveToXY(draggable, x, $('body').height() - $('#dropzone').height() + 30);
        DOMInZone.push(draggable);
        draggable.setAttribute('data-dropped', 'true');
        draggable.setAttribute('data-droppednum', DOMInZone.length - 1);
    } else {
        var numcol = Math.floor($('body').width() / $(draggable).width()) - 1;
        x = ($('body').width() / numcol - $(draggable).width()) / 2 + draggable.getAttribute('data-droppednum') * $('body').width() / numcol;
        dragMoveToXY(draggable, x, $('body').height() - $('#dropzone').height() + 30);
    }
})
interact('#dropzone').dropzone({
    // only accept elements matching this CSS selector
    accept: '.draggable',
    // Require a 75% element overlap for a drop to be possible
    // overlap: 0.1,

    // listen for drop related events:
    ondragenter: function(event) {

    },
    ondragleave: function(event) {
        event.relatedTarget.setAttribute('data-dropped', 'false');
        event.relatedTarget.setAttribute('data-droppednum', 0);
        DOMInZone.remove(event.relatedTarget);
        for (var i = 0; i < DOMInZone.length; i++) {
            DOMInZone[i].setAttribute('data-droppednum', i);
            var numcol = Math.floor($('body').width() / $(DOMInZone[i]).width()) - 1;
            x = ($('body').width() / numcol - $(DOMInZone[i]).width()) / 2 + DOMInZone[i].getAttribute('data-droppednum') * $('body').width() / numcol;
            dragMoveToXY(DOMInZone[i], x, $('body').height() - $('#dropzone').height() + 30);
        }
        // alert(0);
    },
    ondrop: function(event) {
        if (!event.relatedTarget.getAttribute('data-dropped') || event.relatedTarget.getAttribute('data-dropped') == 'false') {
            var numcol = Math.floor($('body').width() / $(event.relatedTarget).width()) - 1;
            x = ($('body').width() / numcol - $(event.relatedTarget).width()) / 2 + DOMInZone.length * $('body').width() / numcol;
            dragMoveToXY(event.relatedTarget, x, $('body').height() - $('#dropzone').height() + 30);
            DOMInZone.push(event.relatedTarget);
            event.relatedTarget.setAttribute('data-dropped', 'true');
            event.relatedTarget.setAttribute('data-droppednum', DOMInZone.length - 1);
        } else {
            var numcol = Math.floor($('body').width() / $(event.relatedTarget).width()) - 1;
            x = ($('body').width() / numcol - $(event.relatedTarget).width()) / 2 + event.relatedTarget.getAttribute('data-droppednum') * $('body').width() / numcol;
            dragMoveToXY(event.relatedTarget, x, $('body').height() - $('#dropzone').height() + 30);
        }
        // alert(1);
    },
    ondropdeactivate: function(event) {}
});

function dragMoveListener(event) {
    var target = event.target;
    // keep the dragged position in the data-x/data-y attributes
    x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
    y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
    moveElementCenterToXY(target, x, y);
    $(target).nextAll().each(function(index, el) {
        ElementCenterAddXY($(this)[0], event.dx, event.dy);
    });
}
//供给胞元素左上角移动到x,y
function dragMoveToXY(target, x, y) {
    dx = x - (parseFloat(target.getAttribute('data-x')) || 0);
    dy = y - (parseFloat(target.getAttribute('data-y')) || 0);
    moveElementCenterToXY(target, x, y);
    $(target).nextAll().each(function(index, el) {
        ElementCenterAddXY($(this)[0], dx, dy);
    });
}

//任意元素左上角移动到x,y
function moveElementCenterToXY(el, x, y) {
    // translate the element
    el.style.webkitTransform =
        el.style.transform =
        'translate(' + x + 'px, ' + y + 'px)';

    // update the posiion attributes
    el.setAttribute('data-x', x);
    el.setAttribute('data-y', y);
}

//任意元素中心移动dx,dy
function ElementCenterAddXY(el, dx, dy) {
    x = (parseFloat(el.getAttribute('data-x')) || 0) + dx;
    y = (parseFloat(el.getAttribute('data-y')) || 0) + dy;
    // translate the element
    el.style.webkitTransform =
        el.style.transform =
        'translate(' + x + 'px, ' + y + 'px)';

    // update the posiion attributes
    el.setAttribute('data-x', x);
    el.setAttribute('data-y', y);
}

// this is used later in the resizing and gesture demos
window.dragMoveListener = dragMoveListener;

$(document).ready(function() {
    $('#simple-menu').sidr();
    $('.draggable').each(function(index, el) {
        var numcol = Math.floor($('body').width() / $(this).width()) - 1;
        x = ($('body').width() / numcol - $(this).width()) / 2 + (index % numcol) * $('body').width() / numcol;
        y = 50 + Math.floor(index / numcol) * 300;
        moveElementCenterToXY(el, x, y);
    });
    $('button').each(function(index, el) {
        if ($(this).data('type') == 'supplycellproperty') {
            $parent = $('#' + $(this).data('target'));
            var R = $parent.width() / 2;
            var r = $(this).width() / 2;
            var gap = 4;
            var centerX = $parent.data('x') + R;
            var centerY = $parent.data('y') + R;
            var rand = -index % 4 * Math.PI / 8;
            var Xrelative = Math.cos(rand) * (R + r + gap);
            var Yrelative = Math.sin(rand) * (R + r + gap);
            x = Xrelative + centerX - $(this).width() / 2;
            y = Yrelative + centerY - $(this).height() / 2;
            moveElementCenterToXY(el, x, y);
            $(this).hide();
        }
    });




    $('.draggable').hover(function() {
        /* Stuff to do when the mouse enters the element */
        this.setAttribute('prop', 'true');
        $draggable = this;
        $(this).nextAll().each(function(index, el) {
            $(this).stop(), $(this).show('100');
        });
    }, function() {
        this.setAttribute('prop', 'false');
        var draggable = this;
        setTimeout(function() {
            if (draggable.getAttribute('prop') == 'false') {
                $(draggable).parent().find('button').each(function(index, el) {
                    $(this).stop(), $(this).hide('100');
                });
            }
        }, 500);
    });
    $('.draggable').nextAll().hover(function() {
        $(this).parent().find('.draggable')[0].setAttribute('prop', 'true');
    }, function() {
        var draggable = $(this).parent().find('.draggable')[0];
        draggable.setAttribute('prop', 'false');
        setTimeout(function() {
            if (draggable.getAttribute('prop') == 'false') {
                $(draggable).parent().find('button').each(function(index, el) {
                    $(this).stop(), $(this).hide('100');
                });
            }
        }, 1000);
    })
});
</script>

</html>
