<!DOCTYPE HTML>
<html>
<script type="text/javascript">
var isBuilderMode = false;
var ResizePolicy = 3;
</script>

<head>
    <title>New Project-EMP.VRP3D.COM</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0'>
    <meta name="apple-touch-fullscreen" content="YES">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="../js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script src="../js/three.js"></script>
    <script src="../js/TrackballControls.min.js" type="text/javascript"></script>
    <script src="../js/JsonIndexLoader.js"></script>
    <script src="../js/empBuilder.min.js" type="text/javascript"></script>
    <script src="../js/empRuntime.min.js" type="text/javascript"></script>
    <script src="../js/animo.min.js" type="text/javascript"></script>
    <script src="../js/stats.min.js" type="text/javascript"></script>
    <script src="../js/Detector.min.js" type="text/javascript"></script>
    <script src="../js/Tween.min.js" type="text/javascript"></script>
    <link href="../js/animate-animo.css" rel="stylesheet" type="text/css">
    <script src="../js/jgestures.min.js" type="text/javascript"></script>
    <script src="../js/pageSwitch.min.js" type="text/javascript"></script>
</head>

<body style="position:absolute;  background: #cccccc; margin-top: 0px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;-webkit-touch-callout:none;-webkit-user-select:none;">
</body>

</html>
<script type="text/javascript">
var winFixWidth = document.body.scrollWidth,
    winFixHeight = document.body.scrollHeight;
</script>
<script type="text/javascript">
var EmpFirstShowPage = {
    'pages': ['328025549-555962254-2129857797-1769827767', 'END'],
    'first': 0
};
var PageInitFunc = {};
var PageExitFunc = {};

window.addEventListener("load", (function() {
    if (PageInitFunc['328025549-555962254-2129857797-1769827767']) PageInitFunc['328025549-555962254-2129857797-1769827767']();
}), false);
</script>
<script type="text/javascript">
(function() { /* page:  汽车展示合_1 */
    var pageElement = empGetElementByID('328025549-555962254-2129857797-1769827767', 'div', null);
    pageElement.style.cssText = "position:absolute;margin:0px 0px 0px 0px;  z-index: 1;overflow:hidden;display:none;"+"width:"+document.body.scrollWidth+"px;height:"+document.body.scrollHeight+"px;";
    PageInitFunc['328025549-555962254-2129857797-1769827767'] = (function() { /*empShowElementByID('1421555384-1552117900-707152488-937763923', 'hidden');  empShowElementByID('1691582227-1485258816-650407005-2039880589', 'visible');  empShowElementByID('513083203-513561875-706164739-1153835674', 'hidden');*/
        _124324387819802023771476550153307121760.enable();
    });
    PageExitFunc['328025549-555962254-2129857797-1769827767'] = (function() {
        _124324387819802023771476550153307121760.disable();
    });
})();

(function() { /*  3DScene:  3D场景_1  */
    var pageElement213 = empGetElementByID('328025549-555962254-2129857797-1769827767', 'div', null);
    var itemElement = empGetElementByID('1243243878-1980202377-1476550153-307121760', 'div', pageElement213);
    pageElement213.appendChild(itemElement);
     itemElement.style.cssText = "pointer-events:auto;position:absolute;left:0px;top:0px;opacity:1;transform-origin:50% 50%;-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-o-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform:translate(0px,0px) rotate(0deg) skew(0deg,0deg) scale(1,1);  z-index:8;"+"width:"+document.body.scrollWidth+"px;height:"+document.body.scrollHeight+"px;";
})();
var _124324387819802023771476550153307121760 = create3dScene('1243243878-1980202377-1476550153-307121760', document.body.scrollWidth, document.body.scrollHeight, 0xffffff, 0);
if (_124324387819802023771476550153307121760) {
    (function() {
        //car1 23,0,0  47,13,33
        //car2     8015,6463,9381
        var EmpCamera = _124324387819802023771476550153307121760.camera;
        EmpCamera.fov = 40;
        EmpCamera.near = 1;
        EmpCamera.far = 10000;
        EmpCamera.position.set(11464.690616920225, 8614.223121609148, 13357.712164766519);
        EmpCamera.lookAt(0, 0, 0);
        EmpCamera.up.set(0, 1, 0);
        //_124324387819802023771476550153307121760.controls.target.set(  0,0,0 ) ; 
        _124324387819802023771476550153307121760.controls.maxDistance = 20000;
        EmpCamera.updateProjectionMatrix();
    })();

    // _124324387819802023771476550153307121760.loadEmpObjs('tsinghua2_car1/index.js', 'car1', 'car1_');
    // _124324387819802023771476550153307121760.loadEmpObjs('tsinghua2_car2/index.js', 'car2', 'car2_');
    _124324387819802023771476550153307121760.loadEmpObjs('tsinghua2_car3/index.js', 'car3', 'car3_','',function(){showCarModel('car3');setCarColor('car3','#000000');});

    (function() {
        // showCarModel('car1');
        // setCarColor('car1','#000000');
    })();
    (function() {
        var defaultLight = _124324387819802023771476550153307121760.findObjectByName('_1433554002181051684713614094411073901394');
        if (!defaultLight) {
            defaultLight = new THREE.AmbientLight(0xaaaaaa);
            defaultLight.name = '_1433554002181051684713614094411073901394';
            _124324387819802023771476550153307121760.addObject(defaultLight);
        } else {
            defaultLight.color.set(0xaaaaaa);
        }
        defaultLight.visible = true;
    })();
    (function() {
        var defaultLight = _124324387819802023771476550153307121760.findObjectByName('_1413231199170667129609714301060068242');
        if (!defaultLight) {
            defaultLight = new THREE.DirectionalLight(0xffffff, 0.7);
            defaultLight.name = '_1413231199170667129609714301060068242';
            _124324387819802023771476550153307121760.addObject(defaultLight);
        } else {
            defaultLight.color.set(0xffffff);
            defaultLight.intensity = 0.5;
        }
        defaultLight.visible = true;

    })();
    _124324387819802023771476550153307121760.showSkybox(false);

    function showCarModel(modelName, showFlag) {
        if (modelName == 'car1') {
            _124324387819802023771476550153307121760.showGroupByName("car1", true);
            _124324387819802023771476550153307121760.showGroupByName("car2", false);
            _124324387819802023771476550153307121760.showGroupByName("car3", false);
            var center = _124324387819802023771476550153307121760.getGroupBoundingBox('car1').center();
            _124324387819802023771476550153307121760.switchToCameraAni(center, new THREE.Vector3(47, 13, 33), 2000);
        } else if (modelName == 'car2') {
            _124324387819802023771476550153307121760.showGroupByName("car1", false);
            _124324387819802023771476550153307121760.showGroupByName("car2", true);
            _124324387819802023771476550153307121760.showGroupByName("car3", false);
            var center = _124324387819802023771476550153307121760.getGroupBoundingBox('car2').center();
            _124324387819802023771476550153307121760.switchToCameraAni(center, new THREE.Vector3(8015, 6463, 9381), 2000);
        } else if (modelName == 'car3') {
            _124324387819802023771476550153307121760.showGroupByName("car1", false);
            _124324387819802023771476550153307121760.showGroupByName("car2", false);
            _124324387819802023771476550153307121760.showGroupByName("car3", true);
            var center = _124324387819802023771476550153307121760.getGroupBoundingBox('car3').center();
            _124324387819802023771476550153307121760.switchToCameraAni(center, new THREE.Vector3(71, 26, 27), 2000);
        }
    }

    function setCarColor(modelName, colorParam) {
        if (modelName == 'car1') {
            var chemat = _124324387819802023771476550153307121760.getMaterialByObjName('car1_Mesh12');
            if (chemat)
                chemat.color.setRGB(colorParam.color[0], colorParam.color[1], colorParam.color[2]);
        } else if (modelName == 'car2') {
            var chemat = _124324387819802023771476550153307121760.getMaterialByObjName('car2_Mesh07');
            var textureLoader = new THREE.TextureLoader();
            var texture = textureLoader.load(colorParam.imgFile);

            if (texture)
                chemat.map = texture;
        } else if (modelName == 'car3') {
            var chemat = _124324387819802023771476550153307121760.getMaterialByObjName('car3_Mesh05');
            if (chemat)
                chemat.color.setRGB(colorParam.color[0], colorParam.color[1], colorParam.color[2]);
        }
    }


} /*addChildrenItems end*/
</script>
