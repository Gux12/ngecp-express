THREE.OrbitControls=function(e,H){function k(){return Math.pow(.95,a.zoomSpeed)}function C(b){a.object instanceof THREE.PerspectiveCamera?y/=b:a.object instanceof THREE.OrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*b)),a.object.updateProjectionMatrix(),z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function D(b){a.object instanceof THREE.PerspectiveCamera?y*=b:a.object instanceof THREE.OrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/b)),a.object.updateProjectionMatrix(),z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function I(b){if(!1!==a.enabled){b.preventDefault();if(b.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;l.set(b.clientX,b.clientY);d=c.ROTATE}else if(b.button===a.mouseButtons.ZOOM){if(!1===a.enableZoom)return;m.set(b.clientX,b.clientY);d=c.DOLLY}else if(b.button===a.mouseButtons.PAN){if(!1===a.enablePan)return;n.set(b.clientX,b.clientY);d=c.PAN}d!==c.NONE&&(document.addEventListener("mousemove",E,!1),document.addEventListener("mouseup",p,!1),document.addEventListener("mouseout",p,!1),a.dispatchEvent(F))}}function E(b){!1!==a.enabled&&(b.preventDefault(),d===c.ROTATE?!1!==a.enableRotate&&(q.set(b.clientX,b.clientY),r.subVectors(q,l),b=a.domElement===document?a.domElement.body:a.domElement,f.theta-=2*Math.PI*r.x/b.clientWidth*a.rotateSpeed,f.phi-=2*Math.PI*r.y/b.clientHeight*a.rotateSpeed,l.copy(q),a.update()):d===c.DOLLY?!1!==a.enableZoom&&(t.set(b.clientX,b.clientY),u.subVectors(t,m),0<u.y?C(k()):0>u.y&&D(k()),m.copy(t),a.update()):d===c.PAN&&!1!==a.enablePan&&(v.set(b.clientX,b.clientY),w.subVectors(v,n),x(w.x,w.y),n.copy(v),a.update()))}function p(b){!1!==a.enabled&&(document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("mouseout",p,!1),a.dispatchEvent(G),d=c.NONE)}function A(b){if(!1!==a.enabled&&!1!==a.enableZoom&&d===c.NONE){b.preventDefault();b.stopPropagation();var g=0;void 0!==b.wheelDelta?g=b.wheelDelta:void 0!==b.detail&&(g=-b.detail);0<g?D(k()):0>g&&C(k());a.update();a.dispatchEvent(F);a.dispatchEvent(G)}}function J(b){if(!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan)switch(b.keyCode){case a.keys.UP:x(0,a.keyPanSpeed);a.update();break;case a.keys.BOTTOM:x(0,-a.keyPanSpeed);a.update();break;case a.keys.LEFT:x(a.keyPanSpeed,0);a.update();break;case a.keys.RIGHT:x(-a.keyPanSpeed,0),a.update()}}function K(b){if(!1!==a.enabled){switch(b.touches.length){case 1:if(!1===a.enableRotate)return;l.set(b.touches[0].pageX,b.touches[0].pageY);d=c.TOUCH_ROTATE;break;case 2:if(!1===a.enableZoom)return;var g=b.touches[0].pageX-b.touches[1].pageX;b=b.touches[0].pageY-b.touches[1].pageY;m.set(0,Math.sqrt(g*g+b*b));d=c.TOUCH_DOLLY;break;case 3:if(!1===a.enablePan)return;n.set(b.touches[0].pageX,b.touches[0].pageY);d=c.TOUCH_PAN;break;default:d=c.NONE}d!==c.NONE&&a.dispatchEvent(F)}}function L(b){if(!1!==a.enabled)switch(b.preventDefault(),b.stopPropagation(),b.touches.length){case 1:if(!1===a.enableRotate)break;if(d!==c.TOUCH_ROTATE)break;q.set(b.touches[0].pageX,b.touches[0].pageY);r.subVectors(q,l);var g=a.domElement===document?a.domElement.body:a.domElement;f.theta-=2*Math.PI*r.x/g.clientWidth*a.rotateSpeed;f.phi-=2*Math.PI*r.y/g.clientHeight*a.rotateSpeed;l.copy(q);a.update();break;case 2:if(!1===a.enableZoom)break;if(d!==c.TOUCH_DOLLY)break;g=b.touches[0].pageX-b.touches[1].pageX;b=b.touches[0].pageY-b.touches[1].pageY;t.set(0,Math.sqrt(g*g+b*b));u.subVectors(t,m);0<u.y?D(k()):0>u.y&&C(k());m.copy(t);a.update();break;case 3:if(!1===a.enablePan)break;if(d!==c.TOUCH_PAN)break;v.set(b.touches[0].pageX,b.touches[0].pageY);w.subVectors(v,n);x(w.x,w.y);n.copy(v);a.update();break;default:d=c.NONE}}function M(b){!1!==a.enabled&&(a.dispatchEvent(G),d=c.NONE)}function N(a){a.preventDefault()}this.object=e;this.domElement=void 0!==H?H:document;this.enabled=!0;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return phi};this.getAzimuthalAngle=function(){return theta};this.reset=function(){a.target.copy(a.target0);a.object.position.copy(a.position0);a.object.zoom=a.zoom0;a.object.updateProjectionMatrix();a.dispatchEvent(O);a.update();d=c.NONE};this.update=function(){var b=new THREE.Vector3,g=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),U=g.clone().inverse(),P=new THREE.Vector3,Q=new THREE.Quaternion;return function(){var e=a.object.position;b.copy(e).sub(a.target);b.applyQuaternion(g);h.setFromVector3(b);a.autoRotate&&d===c.NONE&&(f.theta-=2*Math.PI/60/60*a.autoRotateSpeed);h.theta+=f.theta;h.phi+=f.phi;h.theta=Math.max(a.minAzimuthAngle,Math.min(a.maxAzimuthAngle,h.theta));h.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,h.phi));h.makeSafe();h.radius*=y;h.radius=Math.max(a.minDistance,Math.min(a.maxDistance,h.radius));a.target.add(B);b.setFromSpherical(h);b.applyQuaternion(U);e.copy(a.target).add(b);a.object.lookAt(a.target);!0===a.enableDamping?(f.theta*=1-a.dampingFactor,f.phi*=1-a.dampingFactor):f.set(0,0,0);y=1;B.set(0,0,0);return z||P.distanceToSquared(a.object.position)>R||8*(1-Q.dot(a.object.quaternion))>R?(a.dispatchEvent(O),P.copy(a.object.position),Q.copy(a.object.quaternion),z=!1,!0):!1}}();this.dispose=function(){a.domElement.removeEventListener("contextmenu",N,!1);a.domElement.removeEventListener("mousedown",I,!1);a.domElement.removeEventListener("mousewheel",A,!1);a.domElement.removeEventListener("MozMousePixelScroll",A,!1);a.domElement.removeEventListener("touchstart",K,!1);a.domElement.removeEventListener("touchend",M,!1);a.domElement.removeEventListener("touchmove",L,!1);document.removeEventListener("mousemove",E,!1);document.removeEventListener("mouseup",p,!1);document.removeEventListener("mouseout",p,!1);window.removeEventListener("keydown",J,!1)};var a=this,O={type:"change"},F={type:"start"},G={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},d=c.NONE,R=1E-6,h=new THREE.Spherical,f=new THREE.Spherical,y=1,B=new THREE.Vector3,z=!1,l=new THREE.Vector2,q=new THREE.Vector2,r=new THREE.Vector2,n=new THREE.Vector2,v=new THREE.Vector2,w=new THREE.Vector2,m=new THREE.Vector2,t=new THREE.Vector2,u=new THREE.Vector2;this.handleResize=function(){};var S=function(){var a=new THREE.Vector3;return function(g,c){a.setFromMatrixColumn(c,0);a.multiplyScalar(-g);B.add(a)}}(),T=function(){var a=new THREE.Vector3;return function(c,d){a.setFromMatrixColumn(d,1);a.multiplyScalar(c);B.add(a)}}(),x=function(){var b=new THREE.Vector3;return function(c,d){var e=a.domElement===document?a.domElement.body:a.domElement;if(a.object instanceof THREE.PerspectiveCamera){b.copy(a.object.position).sub(a.target);var f=b.length(),f=f*Math.tan(a.object.fov/2*Math.PI/180);S(2*c*f/e.clientHeight,a.object.matrix);T(2*d*f/e.clientHeight,a.object.matrix)}else a.object instanceof THREE.OrthographicCamera?(S(c*(a.object.right-a.object.left)/a.object.zoom/e.clientWidth,a.object.matrix),T(d*(a.object.top-a.object.bottom)/a.object.zoom/e.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();a.domElement.addEventListener("contextmenu",N,!1);a.domElement.addEventListener("mousedown",I,!1);a.domElement.addEventListener("mousewheel",A,!1);a.domElement.addEventListener("MozMousePixelScroll",A,!1);a.domElement.addEventListener("touchstart",K,!1);a.domElement.addEventListener("touchend",M,!1);a.domElement.addEventListener("touchmove",L,!1);window.addEventListener("keydown",J,!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!e}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");return!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!e}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!e}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");return!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!e}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");return this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.constraint.dampingFactor=e}}});