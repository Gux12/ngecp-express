(function(){var I,R,p,l,S,x,A,f,T,U,J,V,W,r,X,m,B,C,t,D,K,L,q,Y,u,h,E,M,Z,z,N,F,n,y,O,v,G,P,H,aa,Q,ea,ba,w=[].slice,ca={}.hasOwnProperty,da=function(b,a){function d(){this.constructor=b}for(var c in a)ca.call(a,c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b},fa=[].indexOf||function(b){for(var a=0,d=this.length;a<d;a++)if(a in this&&this[a]===b)return a;return-1};p={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}};u=function(){var b;return null!=(b="undefined"!==typeof performance&&null!==performance?"function"===typeof performance.now?performance.now():void 0:void 0)?b:+new Date};E=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;C=window.cancelAnimationFrame||window.mozCancelAnimationFrame;null==E&&(E=function(b){return setTimeout(b,50)},C=function(b){return clearTimeout(b)});Z=function(b){var a,d;a=u();d=function(){var c;c=u()-a;return 33<=c?(a=u(),b(c,function(){return E(d)})):setTimeout(d,33-c)};return d()};M=function(){var b,a,d;d=arguments[0];a=arguments[1];b=3<=arguments.length?w.call(arguments,2):[];return"function"===typeof d[a]?d[a].apply(d,b):d[a]};t=function(){var b,a,d,c,e,k,g;a=arguments[0];c=2<=arguments.length?w.call(arguments,1):[];k=0;for(g=c.length;k<g;k++)if(d=c[k])for(b in d)ca.call(d,b)&&(e=d[b],null!=a[b]&&"object"===typeof a[b]&&null!=e&&"object"===typeof e?t(a[b],e):a[b]=e);return a};X=function(b){var a,d,c,e,k;e=d=a=0;for(k=b.length;e<k;e++)c=b[e],d+=Math.abs(c),a++;return d/a};l=function(){function b(){}b.prototype.on=function(a,b,c,e){var k;null==e&&(e=!1);null==this.bindings&&(this.bindings={});null==(k=this.bindings)[a]&&(k[a]=[]);return this.bindings[a].push({handler:b,ctx:c,once:e})};b.prototype.once=function(a,b,c){return this.on(a,b,c,!0)};b.prototype.off=function(a,b){var c,e;if(null!=(null!=(c=this.bindings)?c[a]:void 0)){if(null==b)return delete this.bindings[a];c=0;for(e=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?e.push(this.bindings[a].splice(c,1)):e.push(c++);return e}};b.prototype.trigger=function(){var a,b,c,e,k,g,f;c=arguments[0];a=2<=arguments.length?w.call(arguments,1):[];if(null!=(b=this.bindings)&&b[c]){k=0;for(f=[];k<this.bindings[c].length;)g=this.bindings[c][k],e=g.handler,b=g.ctx,g=g.once,e.apply(null!=b?b:this,a),g?f.push(this.bindings[c].splice(k,1)):f.push(k++);return f}};return b}();f=window.Pace||{};window.Pace=f;t(f,l.prototype);h=f.options=t({},p,window.paceOptions,function(b,a){var d;null==b&&(b="options");null==a&&(a=!0);if(d=document.querySelector("[data-pace-"+b+"]")){b=d.getAttribute("data-pace-"+b);if(!a)return b;try{return JSON.parse(b)}catch(c){return"undefined"!==typeof console&&null!==console?console.error("Error parsing inline pace options",c):void 0}}}());Q=["ajax","document","eventLag","elements"];l=0;for(x=Q.length;l<x;l++)n=Q[l],!0===h[n]&&(h[n]=p[n]);A=function(b){function a(){return ea=a.__super__.constructor.apply(this,arguments)}da(a,b);return a}(Error);R=function(){function b(){this.progress=0}b.prototype.getElement=function(){var a;if(null==this.el){a=document.querySelector(h.target);if(!a)throw new A;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,"");document.body.className+=" pace-running";this.el.innerHTML='\x3cdiv class\x3d"pace-progress"\x3e\n  \x3cdiv class\x3d"pace-progress-inner"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"pace-activity"\x3e\x3c/div\x3e';null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el};b.prototype.finish=function(){var a;a=this.getElement();a.className=a.className.replace("pace-active","");a.className+=" pace-inactive";document.body.className=document.body.className.replace("pace-running","");return document.body.className+=" pace-done"};b.prototype.update=function(a){this.progress=a;return this.render()};b.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){A=a}return this.el=void 0};b.prototype.render=function(){var a,b,c,e,k,g;if(null==document.querySelector(h.target))return!1;a=this.getElement();c="translate3d("+this.progress+"%, 0, 0)";g=["webkitTransform","msTransform","transform"];e=0;for(k=g.length;e<k;e++)b=g[e],a.children[0].style[b]=c;if(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)a.children[0].setAttribute("data-progress-text",""+(this.progress|0)+"%"),100<=this.progress?b="99":(b=10>this.progress?"0":"",b+=this.progress|0),a.children[0].setAttribute("data-progress",""+b);return this.lastRenderedProgress=this.progress};b.prototype.done=function(){return 100<=this.progress};return b}();p=function(){function b(){this.bindings={}}b.prototype.trigger=function(a,b){var c,e,k,g;if(null!=this.bindings[a]){k=this.bindings[a];g=[];c=0;for(e=k.length;c<e;c++)a=k[c],g.push(a.call(this,b));return g}};b.prototype.on=function(a,b){var c;null==(c=this.bindings)[a]&&(c[a]=[]);return this.bindings[a].push(b)};return b}();P=window.XMLHttpRequest;G=window.XDomainRequest;v=window.WebSocket;D=function(b,a){var d,c;c=[];for(d in a.prototype)try{null==b[d]&&"function"!==typeof a[d]?"function"===typeof Object.defineProperty?c.push(Object.defineProperty(b,d,{get:function(){return a.prototype[d]},configurable:!0,enumerable:!0})):c.push(b[d]=a.prototype[d]):c.push(void 0)}catch(e){}return c};q=[];f.ignore=function(){var b,a;a=arguments[0];b=2<=arguments.length?w.call(arguments,1):[];q.unshift("ignore");b=a.apply(null,b);q.shift();return b};f.track=function(){var b,a;a=arguments[0];b=2<=arguments.length?w.call(arguments,1):[];q.unshift("track");b=a.apply(null,b);q.shift();return b};F=function(b){var a;null==b&&(b="GET");return"track"===q[0]?"force":!q.length&&h.ajax&&("socket"===b&&h.ajax.trackWebSockets||(a=b.toUpperCase(),0<=fa.call(h.ajax.trackMethods,a)))?!0:!1};T=function(b){function a(){var b,c=this;a.__super__.constructor.apply(this,arguments);b=function(b){var a;a=b.open;return b.open=function(d,f,h){F(d)&&c.trigger("request",{type:d,url:f,request:b});return a.apply(b,arguments)}};window.XMLHttpRequest=function(a){a=new P(a);b(a);return a};try{D(window.XMLHttpRequest,P)}catch(e){}if(null!=G){window.XDomainRequest=function(){var a;a=new G;b(a);return a};try{D(window.XDomainRequest,G)}catch(e){}}if(null!=v&&h.ajax.trackWebSockets){window.WebSocket=function(a,b){var d;d=null!=b?new v(a,b):new v(a);F("socket")&&c.trigger("request",{type:"socket",url:a,protocols:b,request:d});return d};try{D(window.WebSocket,v)}catch(e){}}}da(a,b);return a}(p);H=null;K=function(){null==H&&(H=new T);return H};N=function(b){var a,d,c,e;e=h.ajax.ignoreURLs;d=0;for(c=e.length;d<c;d++)if(a=e[d],"string"===typeof a){if(-1!==b.indexOf(a))return!0}else if(a.test(b))return!0;return!1};K().on("request",function(b){var a,d,c,e;e=b.type;c=b.request;if(!(N(b.url)||f.running||!1===h.restartOnRequestAfter&&"force"!==F(e)))return d=arguments,a=h.restartOnRequestAfter||0,"boolean"===typeof a&&(a=0),setTimeout(function(){var a,b,h,m;if("socket"===e?2>c.readyState:0<(a=c.readyState)&&4>a){f.restart();h=f.sources;m=[];a=0;for(b=h.length;a<b;a++)if(n=h[a],n instanceof I){n.watch.apply(n,d);break}else m.push(void 0);return m}},a)});I=function(){function b(){var a=this;this.elements=[];K().on("request",function(){return a.watch.apply(a,arguments)})}b.prototype.watch=function(a){var b,c;c=a.type;b=a.request;if(!N(a.url))return a="socket"===c?new V(b):new W(b),this.elements.push(a)};return b}();W=function(){return function(b){var a,d,c,e,f,g=this;this.progress=0;if(null!=window.ProgressEvent)for(b.addEventListener("progress",function(a){return a.lengthComputable?g.progress=100*a.loaded/a.total:g.progress+=(100-g.progress)/2},!1),f=["load","abort","timeout","error"],d=0,c=f.length;d<c;d++)a=f[d],b.addEventListener(a,function(){return g.progress=100},!1);else e=b.onreadystatechange,b.onreadystatechange=function(){var a;0===(a=b.readyState)||4===a?g.progress=100:3===b.readyState&&(g.progress=50);return"function"===typeof e?e.apply(null,arguments):void 0}}}();V=function(){return function(b){var a,d,c,e,f=this;this.progress=0;e=["error","open"];d=0;for(c=e.length;d<c;d++)a=e[d],b.addEventListener(a,function(){return f.progress=100},!1)}}();l=function(){return function(b){var a,d,c;null==b&&(b={});this.elements=[];null==b.selectors&&(b.selectors=[]);c=b.selectors;a=0;for(d=c.length;a<d;a++)b=c[a],this.elements.push(new S(b))}}();S=function(){function b(a){this.selector=a;this.progress=0;this.check()}b.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return a.check()},h.elements.checkInterval)};b.prototype.done=function(){return this.progress=100};return b}();p=function(){function b(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100;a=document.onreadystatechange;document.onreadystatechange=function(){null!=c.states[document.readyState]&&(c.progress=c.states[document.readyState]);return"function"===typeof a?a.apply(null,arguments):void 0}}b.prototype.states={loading:0,interactive:50,complete:100};return b}();x=function(){return function(){var b,a,d,c,e,f=this;b=this.progress=0;e=[];c=0;d=u();a=setInterval(function(){var g;g=u()-d-50;d=u();e.push(g);e.length>h.eventLag.sampleCount&&e.shift();b=X(e);return++c>=h.eventLag.minSamples&&b<h.eventLag.lagThreshold?(f.progress=100,clearInterval(a)):f.progress=3/(b+3)*100},50)}}();J=function(){function b(a){this.source=a;this.last=this.sinceLastUpdate=0;this.rate=h.initialRate;this.progress=this.lastProgress=this.catchup=0;null!=this.source&&(this.progress=M(this.source,"progress"))}b.prototype.tick=function(a,b){null==b&&(b=M(this.source,"progress"));100<=b&&(this.done=!0);b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/h.catchupTime,this.sinceLastUpdate=0,this.last=b);b>this.progress&&(this.progress+=this.catchup*a);this.progress+=(1-Math.pow(this.progress/100,h.easeFactor))*this.rate*a;this.progress=Math.min(this.lastProgress+h.maxProgressPerFrame,this.progress);this.progress=Math.max(0,this.progress);return this.lastProgress=this.progress=Math.min(100,this.progress)};return b}();B=r=O=m=z=y=null;f.running=!1;L=function(){if(h.restartOnPushState)return f.restart()};null!=window.history.pushState&&(aa=window.history.pushState,window.history.pushState=function(){L();return aa.apply(window.history,arguments)});null!=window.history.replaceState&&(ba=window.history.replaceState,window.history.replaceState=function(){L();return ba.apply(window.history,arguments)});U={ajax:I,elements:l,document:p,eventLag:x};(Y=function(){var b,a,d,c,e;f.sources=y=[];e=["ajax","elements","document","eventLag"];a=0;for(c=e.length;a<c;a++)b=e[a],!1!==h[b]&&y.push(new U[b](h[b]));b=null!=(d=h.extraSources)?d:[];d=0;for(a=b.length;d<a;d++)n=b[d],y.push(new n(h));f.bar=m=new R;z=[];return O=new J})();f.stop=function(){f.trigger("stop");f.running=!1;m.destroy();B=!0;null!=r&&("function"===typeof C&&C(r),r=null);return Y()};f.restart=function(){f.trigger("restart");f.stop();return f.start()};f.go=function(){var b;f.running=!0;m.render();b=u();B=!1;return r=Z(function(a,d){var c,e,k,g,l,p,q,r,t,v,w,x;c=q=0;e=!0;g=r=0;for(v=y.length;r<v;g=++r)for(n=y[g],p=null!=z[g]?z[g]:z[g]=[],g=null!=(x=n.elements)?x:[n],l=t=0,w=g.length;t<w;l=++t)k=g[l],k=null!=p[l]?p[l]:p[l]=new J(k),e&=k.done,k.done||(c++,q+=k.tick(a));m.update(O.tick(a,q/c));return m.done()||e||B?(m.update(100),f.trigger("done"),setTimeout(function(){m.finish();f.running=!1;return f.trigger("hide")},Math.max(h.ghostTime,Math.max(h.minTime-(u()-b),0)))):d()})};f.start=function(b){t(h,b);f.running=!0;try{m.render()}catch(a){A=a}return document.querySelector(".pace")?(f.trigger("start"),f.go()):setTimeout(f.start,50)};"function"===typeof define&&define.amd?define(["pace"],function(){return f}):"object"===typeof exports?module.exports=f:h.startOnPageLoad&&f.start()}).call(this);