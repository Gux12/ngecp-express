<!DOCTYPE HTML>
<html>
<script type="text/javascript">
var isBuilderMode = false;
var winFixWidth = 1024,
    winFixHeight = 768;
var ResizePolicy = 4;
</script>

<head>
    <title>New Project-EMP.VRP3D.COM</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0'>
    <meta name="apple-touch-fullscreen" content="YES">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
    <link rel="stylesheet" href="/css/buttons.min.css">
    <link rel="stylesheet" href="/css/video-js.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <!-- <link href="http://vjs.zencdn.net/5.9.2/video-js.css" rel="stylesheet"> -->
    <script src="../js3/jquery-1.11.3.js" type="text/javascript"></script>
    <script src="../js3/three.js" type="text/javascript"></script>
    <script src="../js3/allInOne.min.js" type="text/javascript"></script>
    <link href="../js3/animate-animo.css" rel="stylesheet" type="text/css">
    <script src="../js3/pageSwitch.js" type="text/javascript"></script>
    <script src="/js/vendor/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/vendor/video.min.js" type="text/javascript"></script>
    <!-- <script src="http://vjs.zencdn.net/5.9.2/video.js"></script> -->
</head>

<body style="background-color:#000000;-webkit-touch-callout:none;-webkit-user-select:none;">
    <div class="container">
        <div class="row">
            <button class="button button-primary button-rounded button-raised" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" style="position: relative;z-index: 1000">
                查看库存
            </button>
            <button class="button button-primary button-raised button-rounded button-raised" id='button-play-toggle' style="z-index: 1000"><i class="fa fa-camera" aria-hidden="true" style="color:white">自动相机</i></button>
            <button class="button button-primary button-raised button-rounded" id="btn-replay" style="z-index: 1000">回放 <span class="fui-checkbox-unchecked"></span></button>
            <button class="button button-primary button-raised button-box button-raised" id="" onclick="playAnimation(0.1, false);" style="z-index: 1000">×10</button>
            <button class="button button-primary button-raised button-box button-raised" id="" onclick="playAnimation(1, false);" style="z-index: 1000">×1</button>
            <button class="button button-circle button-raised button-primary" id="btn-webcam" style="z-index: 1000;float:right;"><i class="fa fa-binoculars" aria-hidden="true" style="color:white"></i></button>
            <div class="collapse" id="collapseExample" style="z-index: 1000;width:50%;">
                <div style="border: 1px solid #ccc;border-radius: 10px;padding: 20px 15px 0 15px;z-index: 1000;background-color: rgba(255,255,255,0.5);">
                    <table class="table table-bordered">
                        <thead>
                            <th colspan="2">原材料需求</th>
                        </thead>
                        <tbody>
                            <tr>
                                <th>底盘</th>
                                <td>200</td>
                            </tr>
                            <tr>
                                <th>发动机</th>
                                <td>300</td>
                            </tr>
                            <tr>
                                <th>座椅</th>
                                <td>500</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div>
            <div class="guxblock-move hide" style="width:640px;height:400px">
                <video id="my_video_1" class="video-js vjs-big-play-centered" style="width: 100%;height: 100%">
                    <source src="carline1.mp4" type="video/mp4">
                    <source src="carline1.webm" type="video/webm">
                </video>
                <!-- <iframe src="http://weblbs.yystatic.com/s/71862053/2514349088/jsscene.swf" frameborder="0" id="my_video_1" class='hide' width=640 height=400></iframe> -->
            </div>
        </div>
    </div>
    <script>
    $(document).ready(function() {
        var myPlayer = videojs("my_video_1", {
            "controls": true,
            "autoplay": false,
            "preload": "auto",
            "loop": true,
            "poster": "carline.jpg",
            "controlBar": {
                "muteToggle": false
            }
        }, function() {
            // Player (this) is initialized and ready
        });
    });
    </script>
</body>
<script src="/js/main.js"></script>

</html>
<script type="text/javascript">
var EmpFirstShowPage = {
    'pages': ['1831030337-1501314425-203771178-1815113035', 'END'],
    'first': 0
};
var PageInitFunc = {};
var PageExitFunc = {};

window.addEventListener("load", (function() {
    if (PageInitFunc['1831030337-1501314425-203771178-1815113035']) PageInitFunc['1831030337-1501314425-203771178-1815113035']();
}), false);
</script>
<script type="text/javascript">
(function() { /* page:  新主页_1 */
    var pageElement = empGetElementByID('1831030337-1501314425-203771178-1815113035', 'div', null);
    pageElement.style.cssText = " background-color:rgba(0,0,0,0);position:absolute;margin:0px 0px 0px 0px ;width:100%;height:100%;  z-index: -1;overflow:hidden;display:none;";
    PageInitFunc['1831030337-1501314425-203771178-1815113035'] = (function() {
        _3585716817803179332060543381977708624.enable();
    });
    PageExitFunc['1831030337-1501314425-203771178-1815113035'] = (function() {
        _3585716817803179332060543381977708624.disable();
    });
})();

(function() { /*  3DScene:  3D场景_1  */
    var pageElement213 = empGetElementByID('1831030337-1501314425-203771178-1815113035', 'div', null);
    var itemElement = empGetElementByID('35857168-1780317933-206054338-1977708624', 'div', pageElement213);
    pageElement213.appendChild(itemElement);
    itemElement.style.cssText = "pointer-events:auto;position:absolute;left:0px;top:0px;width:100%;height:100%;opacity:1;transform-origin:50% 50%;-webkit-transform-origin:50% 50%;-moz-transform-origin:50% 50%;-o-transform-origin:50% 50%;-ms-transform-origin:50% 50%;transform:translate(0px,0px) rotate(0deg) skew(0deg,0deg) scale(1,1);  z-index:1;";
})();
var _3585716817803179332060543381977708624 = create3dScene('35857168-1780317933-206054338-1977708624', {
    'bgcolor': 0xffffff,
    'bgalpha': 0,
    'controls': 'orbit',
    'jsonfile': 'carPL/index.js',
    'fileLoadEndFunc': function() {
        playAnimation(1, false);
    }
});
if (_3585716817803179332060543381977708624) {

    var EmpCamera = _3585716817803179332060543381977708624.camera;
    EmpCamera.fov = 45;
    EmpCamera.near = 1;
    EmpCamera.far = 10000;
    EmpCamera.position.set(1393, 1094, 1098);
    EmpCamera.lookAt(0, 0, 0);
    EmpCamera.up.set(0, 1, 0);
    //_3585716817803179332060543381977708624.controls.target.set(  0,0,0 ) ; 
    _3585716817803179332060543381977708624.controls.maxDistance = 20000;
    _3585716817803179332060543381977708624.controls.maxPolarAngle = 1.7;
    EmpCamera.updateProjectionMatrix();


    var defaultLight = new THREE.AmbientLight(0xaaaaaa);
    defaultLight.name = '_1433554002181051684713614094411073901394';
    defaultLight.visible = true;
    _3585716817803179332060543381977708624.addObject(defaultLight);


    var defaultLight = new THREE.DirectionalLight(0xffffff, 0.2);
    defaultLight.name = '_1413231199170667129609714301060068242';
    defaultLight.visible = true;
    _3585716817803179332060543381977708624.addObject(defaultLight);


} /*addChildrenItems end*/

_3585716817803179332060543381977708624.showSkybox(false);
_3585716817803179332060543381977708624.showGround(false);
_3585716817803179332060543381977708624.showAxis(false);


function playAnimation(durationScale, keepEnd) {
    // _3585716817803179332060543381977708624.resetAniCamera('Camera002');
    // _3585716817803179332060543381977708624.resetAniModel();
    _3585716817803179332060543381977708624.palyAniCamera('Camera002', durationScale, 0, keepEnd);
    _3585716817803179332060543381977708624.playAniModel(durationScale, 0, keepEnd);
}


function pauseAnimation() {
    _3585716817803179332060543381977708624.pauseAniCamera('Camera002');
    _3585716817803179332060543381977708624.pauseAniModel();
}

function replayAnimation() {
    _3585716817803179332060543381977708624.replayAniCamera('Camera002');
    _3585716817803179332060543381977708624.replayAniModel();
}

function resetAnimation(durationScale, keepEnd) {
    _3585716817803179332060543381977708624.resetAniCamera('Camera002');
    _3585716817803179332060543381977708624.resetAniModel();
    _3585716817803179332060543381977708624.palyAniCamera('Camera002', durationScale, 0, keepEnd);
    _3585716817803179332060543381977708624.playAniModel(durationScale, 0, keepEnd);
}

function IsPauseAniCamera(a) {
    _3585716817803179332060543381977708624.mixer || (_3585716817803179332060543381977708624.mixer = new THREE.AnimationMixer(_3585716817803179332060543381977708624.scene));
    var pause = true;
    for (key in _3585716817803179332060543381977708624.cameras) {
        var b = _3585716817803179332060543381977708624.cameras[key];
        b.name == a && b.animations && (pause = _3585716817803179332060543381977708624.mixer.clipAction(b.animations[0], _3585716817803179332060543381977708624.controls).paused)
    }
    return pause;
}

// $('#btn-play').click(function(event) {
//     $('#btn-pause').removeClass('disabled');
//     $('#btn-play').addClass('disabled');
//     replayAnimation();
// });
// $('#btn-pause').click(function(event) {
//     $('#btn-pause').addClass('disabled');
//     $('#btn-play').removeClass('disabled');
//     pauseAnimation();
// });
$('#btn-replay').click(function(event) {
    $('#btn-pause').removeClass('disabled');
    $('#btn-play').addClass('disabled');
    resetAnimation(1, true);
});
isAniCamera = true;
$('#button-play-toggle').click(function(event) {
    /* Act on the event */
    this.innerText = '';
    if (isAniCamera) {
        $(this).append('<i class="fa fa-mouse-pointer" aria-hidden="true" style="color:white">手动相机</i>');
        isAniCamera = !isAniCamera;
        pauseAnimation();
    } else {
        $(this).append('<i class="fa fa-camera" aria-hidden="true" style="color:white">自动相机</i>');
        isAniCamera = !isAniCamera;
        replayAnimation();
    }
});
$('#btn-webcam').click(function() {
    if ($('#my_video_1').parent().hasClass('hide')) {
        // videojs("my_video_1").play();
        $('#my_video_1').parent().removeClass('hide');
        videojs('#my_video_1').play();
    } else {
        // videojs("my_video_1").pause();
        $('#my_video_1').parent().addClass('hide');
        videojs('#my_video_1').pause();
    }

});
document.addEventListener("keydown", function(event) {
    if (event.keyCode === 9 || (event.keyCode >= 32 && event.keyCode <= 34) || (event.keyCode >= 37 && event.keyCode <= 40)) {
        event.preventDefault();
    }
}, false);

document.addEventListener("keyup", function(event) {

    if (event.shiftKey || event.altKey || event.ctrlKey || event.metaKey) {
        return;
    }

    if (event.keyCode === 9 || (event.keyCode >= 32 && event.keyCode <= 34) || (event.keyCode >= 37 && event.keyCode <= 40)) {
        switch (event.keyCode) {
            case 33: // pg up
            case 37: // left
            case 38: // up
            case 9: // tab
            case 32: // space
                if ($('#my_video_1').parent().hasClass('hide') == false) {
                    if (!IsPauseAniCamera("Camera002")) {
                        // $('#btn-pause').addClass('disabled');
                        // $('#btn-play').removeClass('disabled');
                        pauseAnimation();
                        videojs("my_video_1").pause();
                    } else {
                        // $('#btn-pause').removeClass('disabled');
                        // $('#btn-play').addClass('disabled');
                        replayAnimation();
                        videojs("my_video_1").play();
                    }
                } else {
                    if (!IsPauseAniCamera("Camera002")) {
                        // $('#btn-pause').addClass('disabled');
                        // $('#btn-play').removeClass('disabled');
                        pauseAnimation();
                    } else {
                        // $('#btn-pause').removeClass('disabled');
                        // $('#btn-play').addClass('disabled');
                        replayAnimation();
                    }
                }
            case 34: // pg down
            case 39: // right
            case 40: // down
        }

        event.preventDefault();
    }
}, false);
</script>
