<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <title>new index</title>
</head>
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/font-awesome.css">
<link rel="stylesheet" href="/css/buttons.min.css">
<link rel="stylesheet/less" type="text/css" href="/css/supplycell.less" />
<link rel="stylesheet" href="/css/jquery.sidr.dark.min.css">
<link rel="stylesheet" href="/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css" />
<link rel="stylesheet" type="text/css" href="/animate.css/animate.min.css">
<script src="/jquery/dist/jquery.min.js"></script>
<script src="/animo/animo.js"></script>
<script src="/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/hammerjs/hammer.min.js"></script>
<script src="/interact/dist/interact.min.js"></script>
<script src="/js/vendor/jquery.shCircleLoader.js"></script>
<script src="/js/vendor/echarts.js"></script>
<script src="/less/dist/less.min.js"></script>
<script src="/jquery-mousewheel/jquery.mousewheel.js"></script>
<script src="/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/jquery.pin/jquery.pin.min.js"></script>
<script src="/js/myTrick.js"></script>
<style>
body {
    background-color: #e0e0e0;
    /*background-color: #333;*/
    width: 100vw;
    height: 100vh;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    overflow: hidden;
    font-family: 'Microsoft YaHei', 微软雅黑, 'MicrosoftJhengHei', 华文细黑, STHeiti, MingLiu;
}

.yahei {
    font-family: 'Microsoft YaHei', 微软雅黑, 'MicrosoftJhengHei', 华文细黑, STHeiti, MingLiu;
}

.draggable {
    position: absolute;
    display: inline-block;
    margin: 0px;
    padding: 0px;
    border: 0px;
    width: 8vw;
    height: 8vw;
    -webkit-clip-path: circle(50% at 50% 50%);
    transition: transform 0.3s;
    z-index: 1000;
}

.draggable-fake {
    position: relative;
    width: 8vw;
    height: 8vw;
}


/*.dropzone {
    position: absolute;
    width: 100%;
    height: 20vmin;
    bottom: 0px;
    background-color: #505050;
}*/

.show-info-area {
    position: fixed;
    width: 100vw;
    height: 100%;
    left: -89vw;
    background-color: #222;
    transition: left 0.3s, background-color 0.3s;
}

.show-info-area-active {
    left: 0%;
}

.show-info-area-lighter {
    background-color: #505050;
}

.display-area {
    width: 88vw;
    height: 100vh;
    overflow: visible;
    position: relative;
    /*float: right;*/
    left: 102vw;
    transition: left 0.3s;
}

.display-area-active {
    left: 13vw;
}

.demand-display {
    display: none;
}

#cell-reviewer {
    position: relative;
    float: right;
    height: 100%;
    width: 10vw;
    background: rgba(120, 120, 170, 0.2);
    padding: 20px 0px 0px 0px;
    overflow: hidden;
}

#btn-collapse {
    position: relative;
    float: right;
    height: 100%;
    font-size: 1vw;
    padding: 0 0.5vw;
}

.commerce-info {
    position: relative;
    float: right;
    width: 88vw;
    height: 100vh;
    border-left: 2px
}

.commerce-info-item {
    width: 100%;
    height: 100%;
}

.pinned {
    position: fixed;
    right: 0px;
    top: 30vh;
    list-style-type: none;
    display: block;
    z-index: 2000;
    margin: 0;
    padding: 0;
}

.pinned-item {
    background: rgba(50, 50, 50, 1);
    text-decoration: none;
    font-size: 20px;
    min-height: 3em;
    min-width: 3em;
    line-height: 3em;
    text-align: center;
}

.pinned-item > a,
.pinned-item > i {
    color: #aaa;
}

.pinned-item > a:hover,
.pinned-item > i:hover {
    color: #fff;
}

.pinned > .active {
    background: #222;
}

#indexPanel {
    text-align: center;
}
</style>

<body>
    <div class='overlay'>
        <div class='popup'>
            <div class="col-md-12" style="height:100%;">
                <div class='waiting'></div>
            </div>
            <div class="col-md-12" id="indexPanel"></div>
        </div>
    </div>
    <ul class='pinned'>
        <li class='pinned-item active'><a href=""><i class="fa fa-home" aria-hidden="true" style=""></i></a></li>
        <li class='pinned-item' id='search-icon' style="cursor: pointer"><i class="fa fa-search" aria-hidden="true"></i></li>
        <li class='pinned-item'><a href="/sc_my_desire_on_the_way.html"><i class="fa fa-car" aria-hidden="true"></i></a></li>
        <li class='pinned-item'><a href="/sc_my_desire_complete.html"><i class="fa fa-check" aria-hidden="true"></i></a></li>
        <li class='pinned-item'><a href="/demand_period.html"><i class="fa fa-circle-o-notch" aria-hidden="true"></i></a></li>
        <li class='pinned-item'><a href="/demand_forecast.html"><i class="fa fa-binoculars" aria-hidden="true"></i></a></li>
    </ul>
    <input id="search" type="text" class='form-control' placeholder="我好想搜点什么" style="position:fixed;right:-70px;height:40px;border-radius:5px;width: 130px;transition: right 0.3s;">
    <script>
    $(document).ready(function() {
        $('#search').css('top', $('#search-icon').offset().top + 10);
        var isVisible;
        $('#search-icon').click(function() {
            $('#search').css('top', $('#search-icon').offset().top + 10);
            if ($('#search').css('right') == '65px') {
                $('#search').css('right', -70);
                $('#search').css({
                    'right': -70,
                    'z-index': 1
                });
                isVisible = false;
            }
            if ($('#search').css('right') == '-70px') {
                $('#search').css({
                    'right': 65,
                });
                isVisible = true;
            }
            $('#search')[0].addEventListener("transitionend", function() {
                if (isVisible) {
                    $('#search').css('z-index', '1000');
                }
            });
        });
    });
    </script>
    <div class='show-info-area'>
        <button id='btn-collapse' class='button button-inverse'><i class="fa fa-angle-double-right" aria-hidden="true"></i></button>
        <div id='cell-reviewer'>
        </div>
        <div class='commerce-info'>
            <div id='commerce-info1' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info2' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info3' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info4' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info5' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info6' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info7' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info8' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info9' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info10' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info11' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info12' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info13' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info14' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info15' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info16' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info17' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info18' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info19' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info20' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info21' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info22' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info23' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info24' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info25' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info26' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info27' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info28' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info29' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info30' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info31' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info32' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info33' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info34' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info35' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info36' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info37' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info38' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info39' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info40' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info41' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info42' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info43' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info44' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info45' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info46' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info47' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info48' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info49' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
            <div id='commerce-info50' class='hide commerce-info-item'>
                <iframe frameborder="0" style="width:100%;height:100%;"></iframe>
            </div>
        </div>
    </div>
    <div class='display-area display-area-active'>
        <div class="col-md-6 cell-title">
            <div style="padding:10px;margin: 20px 0px 0px 20px;font-size: 30px;color: #fff;background-color: #333;border-radius: 3px;-webkit-box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);float: left;transition: transform 0.3s;" class="yahei">服务类供给</div>
        </div>
        <div class="col-md-6 cell-title">
            <div style="padding:10px;margin: 20px 0px 0px 20px;font-size: 30px;color: #fff;background-color: #333;border-radius: 3px;-webkit-box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);float: left;transition: transform 0.3s;" class="yahei">商品类供给</div>
        </div>
        <div id='cloth-demand' class="col-md-6 demand-display">
            <div class='draggable' id='draggable4' data-inzone='false' data-target='#commerce-info4' data-href='/product_info.html'>
                <div class="supply-cell supply-cell-whie">
                    <img src="img/service/logo设计.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">logo设计</div>
                </div>
            </div>
            <div class='draggable' id='draggable7' data-inzone='false' data-target='#commerce-info7' data-href=''>
                <div class="supply-cell supply-cell-brown">
                    <img src="img/service/文献翻译.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">文献翻译</div>
                </div>
            </div>
            <div class='draggable' id='draggable4' data-inzone='false' data-target='#commerce-info4' data-href='http://www.baidu.com'>
                <div class="supply-cell supply-cell-blue">
                    <img src="img/service/人像摄影.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">人像摄影</div>
                </div>
            </div>
           <div class='draggable' id='draggable4' data-inzone='false' data-target='#commerce-info4' data-href='http://www.baidu.com'>
                <div class="supply-cell supply-cell-red">
                    <img src="img/service/美容美发.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">美容美发</div>
                </div>
            </div>
            <div class='draggable' id='draggable4' data-inzone='false' data-target='#commerce-info4' data-href='http://www.baidu.com'>
                <div class="supply-cell supply-cell-gray">
                    <img src="img/service/电脑维修.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">电脑维修</div>
                </div>
            </div>
        </div>
        <div id="car-demand" class="col-md-6 demand-display">
            <div class='draggable' id='draggable1' data-inzone='false' data-target='#commerce-info1' data-href='/product_info.html'>
                <div class="supply-cell supply-cell-pink">
                    <img src="img/cloth/cloth_yellow_skirt.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">蝴蝶结裙子</div>
                </div>
            </div>
            <div class='draggable' id='draggable2' data-inzone='false' data-target='#commerce-info2' data-href='3Dmodels/carShow'>
                <div class="supply-cell supply-cell-brown">
                    <img src="img/cloth/cloth_green_jacket.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">裁剪军用夹克</div>
                </div>
            </div>
            <div class='draggable' id='draggable3' data-inzone='false' data-target='#commerce-info3' data-href='3Dmodels/sheep2/'>
                <div class="supply-cell supply-cell-gray">
                    <img src="img/cloth/cloth_blue_coat.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">牛仔外套</div>
                </div>
            </div>
            <div class='draggable' id='draggable4' data-inzone='false' data-target='#commerce-info4' data-href='/supply_info.html'>
                <div class="supply-cell supply-cell-blue">
                    <img src="img/cloth/cloth2.jpg" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">雪纺衬衣</div>
                </div>
            </div>
            <div class='draggable' id='draggable5' data-inzone='false' data-target='#commerce-info5' data-href='https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-1065938546.16.l8HtPY&id=531344918768'>
                <div class="supply-cell supply-cell-red">
                    <img src="img/cloth/TS03K07JWHT_3col_F_1.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">长款白衬衫</div>
                </div>
            </div>
            <div class='draggable' id='draggable6' data-inzone='false' data-target='#commerce-info6' data-href='https://item.taobao.com/item.htm?spm=2013.1.1998246701.3.g9tVyE&scm=1007.10152.33975.1p0&id=534169450701&pvid=be292249-dd35-4ec1-b984-06d8d5066268'>
                <div class="supply-cell supply-cell-white">
                    <img src="img/cloth/flower_shirt.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">花衬衣</div>
                </div>
            </div>
            <div class='draggable' id='draggable7' data-inzone='false' data-target='#commerce-info7' data-href=''>
                <div class="supply-cell supply-cell-orange">
                    <img src="img/cloth/trench.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">风衣</div>
                </div>
            </div>
            <div class='draggable' id='draggable8' data-inzone='false' data-target='#commerce-info14' data-href=''>
                <div class="supply-cell supply-cell-red">
                    <img src="img/cloth/cloth_green_jacket.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">裁剪军用夹克</div>
                </div>
            </div>
            <div class='draggable' id='draggable9' data-inzone='false' data-target='#commerce-info5' data-href='https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-1065938546.16.l8HtPY&id=531344918768'>
                <div class="supply-cell supply-cell-white">
                    <img src="img/cloth/TS05H02KWBK_3col_F_1.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">棕色长款长袖</div>
                </div>
            </div>
            <div class='draggable' id='draggable10' data-inzone='false' data-target='#commerce-info5' data-href='https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-1065938546.16.l8HtPY&id=531344918768'>
                <div class="supply-cell supply-cell-gray">
                    <img src="img/cloth/TS10L45LNAV_3col_F_1.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">条纹长款衬衣</div>
                </div>
            </div>
            <div class='draggable' id='draggable11' data-inzone='false' data-target='#commerce-info8' data-href=''>
                <div class="supply-cell supply-cell-blue">
                    <img src="img/cloth/TS25U65KBLE_3col_F_1.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">长款收腰衬衫</div>
                </div>
            </div>
            <div class='draggable' id='draggable12' data-inzone='false' data-target='#commerce-info9' data-href=''>
                <div class="supply-cell supply-cell-gray">
                    <img src="img/cloth/cloth_blue_coat.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">牛仔外套</div>
                </div>
            </div>
            <div class='draggable' id='draggable13' data-inzone='false' data-target='#commerce-info5' data-href='https://item.taobao.com/item.htm?spm=a1z10.5-c-s.w4002-1065938546.16.l8HtPY&id=531344918768'>
                <div class="supply-cell supply-cell-white">
                    <img src="img/cloth/TS13I41JOXB_3col_F_1.png" class="img-adjusted">
                    <div style="position:absolute;bottom:15px;text-align:center;width:100%;font-size:10px;font-weight:bold;">格子衬衣</div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
/* The dragging code for '.draggable' from the demo above
 * applies to this demo as well so it doesn't have to be repeated. */
// target elements with the "draggable" class
interact('.draggable').draggable({
    // enable inertial throwing
    inertia: false,
    // keep the element within the area of it's parent
    restrict: {
        // restriction: "body",
        endOnly: true,
        elementRect: {
            top: 0,
            left: 0,
            bottom: 1,
            right: 1
        }
    },
    // enable autoScroll
    // autoScroll: true,

    // call this function on every dragmove event
    onmove: dragMoveListener,
    // call this function on every dragend event
    onend: function(event) {}
});

// interact('.draggable').on('tap', function(event) {
//     event.preventDefault();
//     window.location.href = $('.draggable').data('href');
// });

interact('.draggable').on('hold', function(event) {
    event.preventDefault();
    $(event.currentTarget).trigger('mouseover');
});

var DOMInShowInfoArea = [];
Array.prototype.indexOf = function(val) {
    for (var i = 0; i < this.length; i++) {
        if (this[i] == val) return i;
    }
    return -1;
};
Array.prototype.remove = function(val) {
    var index = this.indexOf(val);
    if (index > -1) {
        this.splice(index, 1);
    }
};
Array.prototype.unicPush = function(val) {
    var index = this.indexOf(val);
    if (index > -1) {} else {
        this.push(val);
    }
};
var dragLeave;
var $dragLeavePrev;
var initScroll = 0;
var initScrollDisplayArea = 0;
var maxScroll = 0;
var maxScrollDisplayArea = 0;
var mouseWheelSpeed = 40;
interact('.show-info-area').dropzone({
    // only accept elements matching this CSS selector
    accept: '.draggable',
    // Require a 75% element overlap for a drop to be possible
    overlap: 0.75,

    // listen for drop related events:
    ondragenter: function(event) {
        DOMInShowInfoArea.unicPush(event.relatedTarget);
        event.relatedTarget.setAttribute('data-inzone', 'true');
        $('.show-info-area').addClass('show-info-area-lighter');
        dragLeave = false;
    },
    ondragleave: function(event) {
        $dragLeavePrev = DOMInShowInfoArea[DOMInShowInfoArea.indexOf(event.relatedTarget) - 1];
        DOMInShowInfoArea.remove(event.relatedTarget);
        event.relatedTarget.setAttribute('data-inzone', 'false');
        $('.show-info-area').removeClass('show-info-area-lighter');
        dragLeave = true;
    },
    ondrop: function(event) {
        $('.show-info-area').addClass('show-info-area-active');
        $('.display-area').removeClass('display-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.pinned').hide('slow');
        $('#search').hide('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-left" aria-hidden="true"></i>';
        $(event.relatedTarget).css('transition', 'transform 0.3s');
        if ($($(event.relatedTarget).data('target')).children('iframe')[0].src == "") {
            $($(event.relatedTarget).data('target')).children('iframe')[0].src = $(event.relatedTarget).data('href');
        }
        $('.commerce-info-item').addClass('hide');
        $($(event.relatedTarget).data('target')).removeClass('hide');
    },
    ondropdeactivate: function(event) {
        if (DOMInShowInfoArea.length == 0) {
            $('.show-info-area').removeClass('show-info-area-active');
            $('.show-info-area').removeClass('show-info-area-lighter');
            $('.display-area').addClass('display-area-active');
            $('.pinned').show('slow');
            $('#search').show('slow');
            $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-right" aria-hidden="true"></i>';
            $(event.relatedTarget).css('transition', 'transform 0.3s');
            var displayArea = $('.display-area').find('.demand-display');
            for (var i = displayArea.length - 1; i >= 0; i--) {
                draggableResort($(displayArea[i]));
            }
        } else {
            $(event.relatedTarget).css('transition', 'transform 0.3s');
            draggableInZoneResort();
            var displayArea = $('.display-area').find('.demand-display');
            for (var i = displayArea.length - 1; i >= 0; i--) {
                draggableResort($(displayArea[i]));
            }
        }
        if (dragLeave && !$($(event.relatedTarget).data('target')).hasClass('hide')) {
            if ($($(event.relatedTarget).data('target')).children('iframe')[0].src == "") {
                $($(event.relatedTarget).data('target')).children('iframe')[0].src = $(event.relatedTarget).data('href');
            }
            $($(event.relatedTarget).data('target')).addClass('hide');
            if ($dragLeavePrev) {
                $($($dragLeavePrev).data('target')).removeClass('hide');
            }
        }
    }
});

function dragMoveListener(event) {
    var target = event.target;
    // keep the dragged position in the data-x/data-y attributes
    x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
    y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
    moveElementCenterToXY(target, x, y);
    $(target).css('transition', 'transform 0s');
}
//供给胞元素左上角移动到x,y
function dragMoveToXY(target, x, y) {
    dx = x - (parseFloat(target.getAttribute('data-x')) || 0);
    dy = y - (parseFloat(target.getAttribute('data-y')) || 0);
    moveElementCenterToXY(target, x, y);
    $(target).nextAll().each(function(index, el) {
        ElementCenterAddXY($(this)[0], dx, dy);
    });
}

//任意元素左上角移动到相对于父控件的x,y
function moveElementCenterToXY(el, x, y) {
    // translate the element
    el.style.webkitTransform =
        el.style.transform =
        'translate(' + x + 'px, ' + y + 'px)';

    // update the posiion attributes
    el.setAttribute('data-x', x);
    el.setAttribute('data-y', y);
}

//任意元素移动dx,dy
function ElementCenterAddXY(el, dx, dy) {
    x = (parseFloat(el.getAttribute('data-x')) || 0) + dx;
    y = (parseFloat(el.getAttribute('data-y')) || 0) + dy;
    // translate the element
    el.style.webkitTransform =
        el.style.transform =
        'translate(' + x + 'px, ' + y + 'px)';

    // update the posiion attributes
    el.setAttribute('data-x', x);
    el.setAttribute('data-y', y);
}

// this is used later in the resizing and gesture demos
window.dragMoveListener = dragMoveListener;

$(document).ready(function() {
    // 判断图片加载状况，加载完成后回调
    isImgLoad(function() {
        // 加载完成
        $('.demand-display').css('display', 'block');
        var displayArea = $('.display-area').find('.demand-display');
        for (var i = displayArea.length - 1; i >= 0; i--) {
            draggableResort($(displayArea[i]));
        }
    });
    // $(".pinned").pin();
});

$('.draggable').on('mousewheel', function(event) {
    // console.log(event.deltaX, event.deltaY, event.deltaFactor);
    $('.draggable').css('transition', 'transform 0.3s');
    if (this.getAttribute('data-inzone') == 'true') {
        initScroll = initScroll + event.deltaY;
        if (initScroll > 1) {
            initScroll = 0;
            // } else if (initScroll < (-DOMInShowInfoArea.length * ($(DOMInShowInfoArea[0]).height() * 1.1) - 20 + $('body').height() / mouseWheelSpeed)) {
            //     initScroll = (-DOMInShowInfoArea.length * ($(DOMInShowInfoArea[0]).height() * 1.1) - 20 + $('body').height() / mouseWheelSpeed);
        } else {
            for (var i = DOMInShowInfoArea.length - 1; i >= 0; i--) {
                ElementCenterAddXY(DOMInShowInfoArea[i], 0, event.deltaY * mouseWheelSpeed);
            }
        }
    } else {
        // $('.draggable').css('transition', 'transform 0s');
        initScrollDisplayArea = initScrollDisplayArea + event.deltaY;
        // h = 0;
        // for (var i = $('.display-area').find('.demand-display').length - 1; i >= 0; i--) {
        //     h = h + $($('.display-area').find('.demand-display')[i]).height();
        // }
        if (initScrollDisplayArea > 0) {
            initScrollDisplayArea = 0;
            // } else if (initScrollDisplayArea < (-h - 20 + $('body').height())/mouseWheelSpeed) {
            //     initScrollDisplayArea = (-h - 20 + $('body').height())/mouseWheelSpeed;
        } else {
            $(this).children('.cell-title').each(function(index, el) {
                ElementCenterAddXY($(this).children()[0], 0, event.deltaY * mouseWheelSpeed);
            });
            $(this).find('.draggable').each(function(index, el) {
                if (el.getAttribute('data-inzone') == 'false') {
                    ElementCenterAddXY(el, 0, event.deltaY * mouseWheelSpeed);
                }
            });
        }
    }
});
// 窗口大小变化时，改变布局
$(window).resize(function(event) {
    var displayArea = $('.display-area').find('.demand-display');
    for (var i = displayArea.length - 1; i >= 0; i--) {
        draggableResort($(displayArea[i]));
    }
    draggableInZoneResort();
});
// 展示区图标的重新排列
function draggableResort(areaToLay) {
    var numinzone = 0;
    areaToLay.find('.draggable').each(function(index, el) {
        if (el.getAttribute('data-inzone') == 'true') {
            numinzone = numinzone + 1;
        } else {
            index = index - numinzone;
            var numcol = Math.floor(areaToLay.width() / $(this).width()) - 1;
            x = (areaToLay.width() / numcol - $(this).width()) / 2 + (index % numcol) * areaToLay.width() / numcol;
            y = 20 + Math.floor(index / numcol) * ($(this).height() * 1.1);
            moveElementCenterToXY(el, x, y);
            areaToLay.css('height', y + ($(this).height() * 1.1));
        }
    });
    $('.display-area').children('.cell-title').each(function(index, el) {
        moveElementCenterToXY($(this).children()[0], 0, 0);
    });
    initScroll = 0;
    initScrollDisplayArea = 0;
}
// 标签区图标重新排列
function draggableInZoneResort() {
    var numinzone = DOMInShowInfoArea.length;
    var isload = false;
    var t;

    function move() {
        if (document.getElementById('cell-reviewer')) {
            for (var i = 0; i <= DOMInShowInfoArea.length - 1; i++) {
                x = $('#cell-reviewer').offset().left - $(DOMInShowInfoArea[i]).parent().offset().left - parseInt($(DOMInShowInfoArea[i]).parent().css('padding-left')) + ($('#cell-reviewer').width() - $(DOMInShowInfoArea[i]).width()) / 2;
                y = 20 + i * ($(DOMInShowInfoArea[i]).height() * 1.1) - $(DOMInShowInfoArea[i]).parent().offset().top - parseInt($(DOMInShowInfoArea[i]).parent().css('padding-top'));
                moveElementCenterToXY(DOMInShowInfoArea[i], x, y);
            }
            clearTimeout(t);
        } else {
            t = setTimeout(move, 100);
        }
    }
    move();
    initScroll = 0;
}
$(document).keydown(function(event) {
    /* Act on the event */
    if (event.keyCode == 37) {
        $('.show-info-area').removeClass('show-info-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.display-area').addClass('display-area-active');
        $('.pinned').show('slow');
        $('#search').show('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-right" aria-hidden="true"></i>';
        draggableInZoneResort();
    }
    if (event.keyCode == 39) {
        $('.show-info-area').addClass('show-info-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.display-area').removeClass('display-area-active');
        $('.pinned').hide('slow');
        $('#search').hide('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-left" aria-hidden="true"></i>';
        draggableInZoneResort();
    }
});

$('#btn-collapse').click(function(event) {
    /* Act on the event */
    if ($('.show-info-area').hasClass('show-info-area-active')) {
        $('.show-info-area').removeClass('show-info-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.display-area').addClass('display-area-active');
        $('.pinned').show('slow');
        $('#search').show('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-right" aria-hidden="true"></i>';
        draggableInZoneResort();
    } else {
        $('.show-info-area').addClass('show-info-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.display-area').removeClass('display-area-active');
        $('.pinned').hide('slow');
        $('#search').hide('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-left" aria-hidden="true"></i>';
        draggableInZoneResort();
    }
});
$('.show-info-area').on('mousewheel', function(event) {
    console.log(event.deltaX, event.deltaY, event.deltaFactor);
    $('.draggable').css('transition', 'transform 0.3s');
    initScroll = initScroll + event.deltaY;
    if (initScroll > 0) {
        initScroll = 0;
        // } else if (initScroll < (-DOMInShowInfoArea.length * ($(DOMInShowInfoArea[0]).height() * 1.1) - 20 + $('body').height() / mouseWheelSpeed)) {
        //     initScroll = (-DOMInShowInfoArea.length * ($(DOMInShowInfoArea[0]).height() * 1.1) - 20 + $('body').height() / mouseWheelSpeed);
    } else {
        for (var i = DOMInShowInfoArea.length - 1; i >= 0; i--) {
            ElementCenterAddXY(DOMInShowInfoArea[i], 0, event.deltaY * mouseWheelSpeed);
        }
    }
});
$('.display-area').on('mousewheel', function(event) {
    // $('.draggable').css('transition', 'transform 0s');
    initScrollDisplayArea = initScrollDisplayArea + event.deltaY;
    // h = 0;
    // for (var i = $(this).find('.demand-display').length - 1; i >= 0; i--) {
    //     h = h + $($(this).find('.demand-display')[i]).height();
    // }
    if (initScrollDisplayArea > 1) {
        initScrollDisplayArea = 0;
        // } else if (initScrollDisplayArea < (-h - 20 + $('body').height()) / mouseWheelSpeed) {
        //     initScrollDisplayArea = (-h - 20 + $('body').height()) / mouseWheelSpeed;
    } else {
        $(this).children('.cell-title').each(function(index, el) {
            ElementCenterAddXY($(this).children()[0], 0, event.deltaY * mouseWheelSpeed);
        });
        $(this).find('.draggable').each(function(index, el) {
            if (el.getAttribute('data-inzone') == 'false') {
                ElementCenterAddXY(el, 0, event.deltaY * mouseWheelSpeed);
            }
        });
    }
});
interact('.draggable').on('tap', function(event) {
    if (event.currentTarget.getAttribute('data-inzone') == 'true') {
        var $target = $($(event.currentTarget).data('target'));
        $('.show-info-area').addClass('show-info-area-active');
        $('.display-area').removeClass('display-area-active');
        $('.show-info-area').removeClass('show-info-area-lighter');
        $('.pinned').hide('slow');
        $('#search').hide('slow');
        $('#btn-collapse')[0].innerHTML = '<i class="fa fa-angle-double-left" aria-hidden="true"></i>';
        $($target).css('transition', 'transform 0.3s');
        if ($target.children('iframe')[0].src == "") {
            $target.children('iframe')[0].src = $(event.currentTarget).data('href');
        }
        $('.commerce-info-item').addClass('hide');
        $target.removeClass('hide');
    }

    event.preventDefault();
});
</script>

</html>
